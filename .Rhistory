points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])
}
legend("topright",lty=1,conts,col=contColors)
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs)+1,xlab="time(Ma)",ylab="occurrences")
for(i in conts){
time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean)
points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])
}
legend("topright",lty=1,conts,col=contColors)
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs)+1,xlab="time(Ma)",ylab="occurrences")
for(i in conts){
time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean)
points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])
}
legend("topright",lty=1,conts,col=contColors,bty="n")
legend("topleft",lty=1,conts,col=contColors,bty="n")
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs)+1,xlab="time(Ma)",ylab="occurrences")
for(i in conts){
time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean)
points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])
}
legend("topleft",lty=1,conts,col=contColors,bty="n")
?casefold
legend("topleft",lty=1,toupper(conts),col=contColors,bty="n")
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs)+1,xlab="time(Ma)",ylab="occurrences")
for(i in conts){
time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean)
points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])
}
legend("topleft",lty=1,toupper(conts),col=contColors,bty="n")
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs),xlab="time(Ma)",ylab="occurrences")
for(i in conts){
time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean)
points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])
}
legend("topright",lty=1,toupper(conts),col=contColors,bty="n")
#logged -
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs)+1,xlab="time(Ma)",ylab="occurrences")
for(i in conts){
time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean)
points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])
}
legend("topleft",lty=1,toupper(conts),col=contColors,bty="n")
options(stringsAsFactors = F)
data<-list()
for (i in dir("crinoids-quickdiv-cont/")) {
assign(substr(i,0,3),read.csv(file=paste0("crinoids-quickdiv-cont/",i)))
}
conts<-sapply(dir("crinoids-quickdiv-cont/"),function(x){substr(x,0,3)})
data<-list(afr,asi,aus,eur,noa,soa);names(data)<-conts
contColors<-rainbow(length(conts));names(contColors)<-conts
#not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs),xlab="time(Ma)",ylab="occurrences")
for(i in conts){
time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean)
points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])
}
legend("topright",lty=1,toupper(conts),col=contColors,bty="n")
#logged - AUS/SOA (Gondwana?) has an Early Permian peak; ASI has a late Ord/Sil start and a full stage late end-Dev extinction
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs)+1,xlab="time(Ma)",ylab="occurrences")
for(i in conts){
time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean)
points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])
}
legend("topleft",lty=1,toupper(conts),col=contColors,bty="n")
data<-list(all,afr,asi,aus,eur,noa,soa);names(data)<-conts
contColors<-c("black",rainbow(length(conts)-1));names(contColors)<-conts
data<-list(all,afr,asi,aus,eur,noa,soa);names(data)<-conts
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs),xlab="time(Ma)",ylab="occurrences")
for(i in conts){
time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean)
points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])
}
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs)+1,xlab="time(Ma)",ylab="occurrences")
for(i in conts){
time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean)
points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])
}
legend("topleft",lty=1,toupper(conts),col=contColors,bty="n")
legend("topleft",lty=1,toupper(conts[2,1,3:length(conts)]),col=contColors,bty="n")
length(conts)
legend("topleft",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs)+1,xlab="time(Ma)",ylab="occurrences")
for(i in conts){
time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean)
points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])
}
legend("topleft",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs),xlab="time(Ma)",ylab="occurrences")
for(i in conts){
time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean)
points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])
}
legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs),xlab="time(Ma)",ylab="occurrences",main="Crinoids")
for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])}
legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs),xlab="time(Ma)",ylab="occurrences",main="Crinoids");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs)+1,xlab="time(Ma)",ylab="log(occurrences)",main="Crinoids");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs),xlab="time(Ma)",ylab="occurrences",main="Crinoids");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
head(all)
options(stringsAsFactors = F)
data<-list()
for (i in dir("crinoids-quickdiv-cont/")) {
assign(substr(i,0,3),read.csv(file=paste0("crinoids-quickdiv-cont/",i)))
}
conts<-sapply(dir("crinoids-quickdiv-cont/"),function(x){substr(x,0,3)})
data<-list(all,afr,asi,aus,eur,noa,soa);names(data)<-conts
contColors<-c("black",rainbow(length(conts)-1));names(contColors)<-conts
head(all)
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin)+1,xlab="time(Ma)",ylab="log(genera)",main="Crinoid diversity (logged)");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]+1),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin)+1,xlab="time(Ma)",ylab="log(genera)",main="Crinoid diversity (logged)");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]+1),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs)+1,xlab="time(Ma)",ylab="log(occurrences)",main="Crinoid occurrences (logged)");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs)+1,xlab="time(Ma)",ylab="log(occurrences)",main="Crinoid occurrences (logged)");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
options(stringsAsFactors = F)
data<-list()
for (i in dir("crinoids-quickdiv-cont/")) {
assign(substr(i,0,3),read.csv(file=paste0("crinoids-quickdiv-cont/",i)))
}
conts<-sapply(dir("crinoids-quickdiv-cont/"),function(x){substr(x,0,3)})
data<-list(all,afr,asi,aus,eur,noa,soa);names(data)<-conts
contColors<-c("black",rainbow(length(conts)-1));names(contColors)<-conts
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
require("jsonlite","httr")
install.packages("jsonlite")
install.packages("httr")
install.packages("httr")
install.packages("curl")
install.packages("curl")
install.packages("httr")
require(jsonlite,httr)
require(httr)
conts
paste("https://paleobiodb.org/data1.2/occs/quickdiv.txt?base_name=Crinoidea&continent=",cont[i],"&count=genera",collapse="")
conts<-sapply(dir("crinoids-quickdiv-cont/"),function(x){substr(x,0,3)})
conts
i
i<-1
cont.abbr<-c("AFR","ALL","ASI","AUS","EUR","NOA","SOA")
paste("https://paleobiodb.org/data1.2/occs/quickdiv.txt?base_name=Crinoidea&continent=",cont.abbr[i],"&count=genera",collapse="")
paste0("https://paleobiodb.org/data1.2/occs/quickdiv.txt?base_name=Crinoidea&continent=",cont.abbr[i],"&count=genera",collapse="")
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.txt?base_name=Crinoidea&continent=",cont.abbr[i],"&count=genera",collapse="")
?GET
call
GET(call)
test<-GET(call)
test
call
dim(test)
length(test)
content(test)
fromJSON(test)
require(jsonlite)
fromJSON(test)
fromJSON(content(test))
fromJSON(content(test),flatten=T)
fromJSON(content(test,"text"),flatten=T)
head(content(test))
str(test)
str(test$content)
head(test$content)
head(test)
head(content(test))
str(content(test))
fromJSON(content(test,"text"),flatten=T)
install.packages("velociraptr")
install.packages("paleobioDB")
install("raster")
install.packages("raster")
install.packages("lattice")
install.packages("raster")
install.packages("paleobioDB")
require(jsonlite);require(httr);require(paleobioDB)
pbdb_map_occur(crinoidea,res=5)
pbdb_occurrences(base_name="Crinoidea",continent="AFR")
test<-pbdb_occurrences(limit="all",base_name="Crinoidea",continent="AFR")
pbdb_temporal_resolution(crinoidea)
pbdb_temporal_resolution(test)
install.packages(velociraptr)
install.packages("velociraptr")
install.packages("kernsmooth")
install.packages("KernSmooth")
install.packages("velociraptr")
install.packages("velociraptr")
install.packages("velociraptr")
install.packages("sf")
install.packages("sf")
install.packages("velociraptr")
install.packages(c("stringi", "tibble"))
test
test<-GET(call)
str(test)
jsonlite::parse_json(test)
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=Crinoidea&continent=",cont.abbr[i],"&count=genera",collapse="")
call
test<-GET(call)
test
str(test)
test$content
parse(test)
read.csv(call)
data<-vector(mode="list",7)
data
cont.abbr<-c("AFR","ALL","ASI","AUS","EUR","NOA","SOA")
data<-vector(mode="list",7)
for (i in 1:7){
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=Crinoidea&continent=",cont.abbr[i],"&count=genera",collapse="")
data[i]<-read.csv(call)
}
data[i]
data<-vector(mode="list",7)
for (i in 1:7){
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=Crinoidea&continent=",cont.abbr[i],"&count=genera",collapse="")
data[[i]]<-as.data.frame(read.csv(call))
}
i
read.csv(call)
call
read.csv("https://paleobiodb.org/data1.2/config.txt?show=continents")
cont.abbr<-read.csv("https://paleobiodb.org/data1.2/config.txt?show=continents")$continent_code
cont.abbr
data<-vector(mode="list",length(cont.abbr))
for (i in 1:length(cont.abbr)){
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=Crinoidea&cc=",cont.abbr[i],"&count=genera",collapse="")
data[[i]]<-as.data.frame(read.csv(call))
}
names(data)<-cont.abbr
contColors<-c("black",rainbow(length(cont.abbr)-1));names(contColors)<-cont.abbr
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
do.call(rbind.data.frame,data)
data[1]
data[2]
data[3]
call
data<-vector(mode="list",length(cont.abbr))
cont.abbr
for (i in 1:length(cont.abbr)){
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=Crinoidea&continent=",cont.abbr[i],"&count=genera",collapse="")
data[[i]]<-as.data.frame(read.csv(call))
}
data[1]
names(data)<-cont.abbr
contColors<-c("black",rainbow(length(cont.abbr)-1));names(contColors)<-cont.abbr
contColors
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$n_occs),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
do.call(rbind.data.frame,data)
apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)
max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean))
max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T)
range(do.call(rbind.data.frame,data)$n_occs,na.rm=T)
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in conts){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T)
data[i][[1]][c("max_ma","min_ma")]
i
data[i]
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
##occs logged - AUS/SOA (Gondwana?) has an Early Permian peak; ASI has a late Ord/Sil start and a full stage late end-Dev extinction
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T)+1,xlab="time(Ma)",ylab="log(occurrences)",main="Crinoid occurrences (logged)");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean)),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(conts[c(2,1,3:length(conts))]),col=contColors,bty="n")
contColors
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(cont.abbr[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n")
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(cont.abbr[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n")
##occs logged - AUS/SOA (Gondwana?) has an Early Permian peak; ASI has a late Ord/Sil start and a full stage late end-Dev extinction
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T)+1,xlab="time(Ma)",ylab="log(occurrences)",main="Crinoid occurrences (logged)");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(cont.abbr[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n")
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(cont.abbr[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n")
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(cont.abbr[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(cont.abbr[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
##occs logged - AUS/SOA (Gondwana?) has an Early Permian peak; ASI has a late Ord/Sil start and a full stage late end-Dev extinction
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T)+1,xlab="time(Ma)",ylab="log(occurrences)",main="Crinoid occurrences (logged)");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(cont.abbr[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(cont.abbr[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
conts<-read.csv("https://paleobiodb.org/data1.2/config.txt?show=continents")
cont.abbr<-conts$$continent_code
cont.abbr<-conts$continent_code
conts
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
contColors<-c("black",rainbow(length(cont.abbr)-1));names(contColors)<-conts$continent_name
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
##occs logged - AUS/SOA (Gondwana?) has an Early Permian peak; ASI has a late Ord/Sil start and a full stage late end-Dev extinction
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T)+1,xlab="time(Ma)",ylab="log(occurrences)",main="Crinoid occurrences (logged)");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
##occs logged - AUS/SOA (Gondwana?) has an Early Permian peak; ASI has a late Ord/Sil start and a full stage late end-Dev extinction
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T)+1,xlab="time(Ma)",ylab="log(occurrences)",main="Crinoid occurrences (logged)");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
options(stringsAsFactors = F)
require(jsonlite);require(httr);require(paleobioDB)
conts<-read.csv("https://paleobiodb.org/data1.2/config.txt?show=continents")
conts<-rbind(conts,c("con","All","NA"))
cont.abbr<-conts$continent_code
data<-vector(mode="list",length(cont.abbr))
for (i in 1:length(cont.abbr-1)){
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=Crinoidea&continent=",cont.abbr[i],"&count=genera",collapse="")
data[[i]]<-as.data.frame(read.csv(call))
}
data[[length(cont.abbr)]]<-as.data.frame(read.csv("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=Crinoidea&count=genera"))
names(data)<-conts$continent_name
contColors<-c(rainbow(length(cont.abbr)-1),"black");names(contColors)<-conts$continent_name
for (i in 1:(length(cont.abbr)-1)){
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=Crinoidea&continent=",cont.abbr[i],"&count=genera",collapse="")
data[[i]]<-as.data.frame(read.csv(call))
}
data[[length(cont.abbr)]]<-as.data.frame(read.csv("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=Crinoidea&count=genera"))
names(data)<-conts$continent_name
contColors<-c(rainbow(length(cont.abbr)-1),"black");names(contColors)<-conts$continent_name
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
##occs logged - AUS/SOA (Gondwana?) has an Early Permian peak; ASI has a late Ord/Sil start and a full stage late end-Dev extinction
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T)+1,xlab="time(Ma)",ylab="log(occurrences)",main="Crinoid occurrences (logged)");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
##occs logged - AUS/SOA (Gondwana?) has an Early Permian peak; ASI has a late Ord/Sil start and a full stage late end-Dev extinction
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T)+1,xlab="time(Ma)",ylab="log(occurrences)",main="Crinoid occurrences (logged)");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
##occs logged - AUS/SOA (Gondwana?) has an Early Permian peak; ASI has a late Ord/Sil start and a full stage late end-Dev extinction
plot(1,1,type="n",log="y",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T)+1,xlab="time(Ma)",ylab="log(occurrences)",main="Crinoid occurrences (logged)");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
require(jsonlite);require(httr);require(paleobioDB);require(beepr)
install.packages("raster")
install.packages("terra")
require(jsonlite);require(httr);require(paleobioDB);require(beepr)
require(jsonlite);require(httr);require(paleobioDB);require(beepr)
head(data)
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=",taxon,"&count=genera")
taxon<-"Crinoidea"
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=",taxon,"&count=genera")
call
data.crinoidea<-data
rm(data.crinoidea)
Crinoidea<-data
conts<-read.csv("https://paleobiodb.org/data1.2/config.txt?show=continents")
conts
conts<-rbind(conts,c("con","All","NA"))
cont.abbr<-conts$continent_code
cont.abbr
data<-vector(mode="list",length(cont.abbr))
taxon<-"Brachiopoda"
for (i in 1:(length(cont.abbr)-1)){
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=",taxon,"&continent=",cont.abbr[i],"&count=genera",collapse="")
data[[i]]<-as.data.frame(read.csv(call))
}
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=",taxon,"&count=genera")
call
data[[length(cont.abbr)]]<-as.data.frame(read.csv(call))
names(data)<-conts$continent_name
head(data)
contColors<-c(rainbow(length(cont.abbr)-1),"black");names(contColors)<-conts$continent_name
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),xlab="time(Ma)",ylab="occurrences",main="Crinoid occurrences");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
##occs logged - AUS/SOA (Gondwana?) has an Early Permian peak; ASI has a late Ord/Sil start and a full stage late end-Dev extinction
plot(1,1,type="n",log="y",
xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),
ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T)+1,
xlab="time(Ma)",ylab="log(occurrences)",
main=paste0(taxon," occurrences (logged)"))
for(i in 1:length(cont.abbr)){
time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean)
points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",
xlim=rev(range(time)),col=contColors[i])}
legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",
xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),
ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),
xlab="time(Ma)",ylab="occurrences",
main=paste0(taxon," occurrences"))
for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
##occs logged - AUS/SOA (Gondwana?) has an Early Permian peak; ASI has a late Ord/Sil start and a full stage late end-Dev extinction
plot(1,1,type="n",log="y",
xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),
ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T)+1,
xlab="time(Ma)",ylab="log(occurrences)",
main=paste0(taxon," occurrences (logged)"))
for(i in 1:length(cont.abbr)){time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])}
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",
xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),
ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),
xlab="time(Ma)",ylab="occurrences",
main=paste0(taxon," occurrences"))
for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
Brachiopoda<-data
data<-Crinoidea
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",
xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),
ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),
xlab="time(Ma)",ylab="occurrences",
main=paste0(taxon," occurrences"))
for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
taxon<-"Crinoidea"
#occs not logged - wow @ NOA, also even EUR is noticeably different esp. in timing of Devonian peak and extinction
plot(1,1,type="n",
xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),
ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T),
xlab="time(Ma)",ylab="occurrences",
main=paste0(taxon," occurrences"))
for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean,na.rm=T);  points(cbind(time,data[i][[1]]["n_occs"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topright",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",main="Crinoid diversity");  for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",
xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),
ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",
main=paste0(taxon," diversity"))
for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
taxon<-"Brachiopoda";data<-Brachiopoda
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",
xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),
ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",
main=paste0(taxon," diversity"))
for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
taxon<-"Crinoidea";data<-Crinoidea
##quickdiv not logged - basically the signal is all NOA except for the Sil-Dev of EUR. the AUS diversity in the Permian probably reflects Timor? look at ASI in the Famennian and Tournaisian, it does the opposite of the global signal!
plot(1,1,type="n",
xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),
ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",
main=paste0(taxon," diversity"))
for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
data$Africa
head(data$Africa)
---
title: "Geographic bias"
taxon<-"Brachiopoda"
conts<-read.csv("https://paleobiodb.org/data1.2/config.txt?show=continents")
conts<-rbind(conts,c("con","All","NA"))
cont.abbr<-conts$continent_code
data<-vector(mode="list",length(cont.abbr))
for (i in 1:(length(cont.abbr)-1)){
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=",taxon,"&continent=",cont.abbr[i],"&count=genera",collapse="")
data[[i]]<-as.data.frame(read.csv(call))
}
call<-paste0("https://paleobiodb.org/data1.2/occs/quickdiv.csv?base_name=",taxon,"&count=genera")
data[[length(cont.abbr)]]<-as.data.frame(read.csv(call))
names(data)<-conts$continent_name
contColors<-c(rainbow(length(cont.abbr)-1),"black");names(contColors)<-conts$continent_name
options(stringsAsFactors = F)
require(jsonlite);require(httr);require(paleobioDB);require(beepr)
plot(1,1,type="n",log="y",
xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),
ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T)+1,
xlab="time(Ma)",ylab="log(occurrences)",
main=paste0(taxon," occurrences (logged)"))
for(i in 1:length(cont.abbr)){time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])}  ;legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
plot(1,1,type="n",log="y",
xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),
ylim=range(do.call(rbind.data.frame,data)$n_occs,na.rm=T)+1,
xlab="time(Ma)",ylab="log(occurrences)",
main=paste0(taxon," occurrences (logged)"))
for(i in 1:length(cont.abbr)){time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);points(cbind(time,data[i][[1]]["n_occs"]+1),type="l",xlim=rev(range(time)),col=contColors[i])}  ;legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.7)
plot(1,1,type="n",
xlim=c(max(apply(do.call(rbind.data.frame,data)[c("max_ma","min_ma")],1,mean),na.rm=T),250),
ylim=range(do.call(rbind.data.frame,data)$sampled_in_bin,na.rm=T),xlab="time(Ma)",ylab="genera",
main=paste0(taxon," diversity"))
for(i in 1:length(cont.abbr)){  time<-apply(data[i][[1]][c("max_ma","min_ma")],1,mean);  points(cbind(time,data[i][[1]]["sampled_in_bin"]),type="l",xlim=rev(range(time)),col=contColors[i])};  legend("topleft",lty=1,toupper(names(contColors)[c(2,1,3:length(cont.abbr))]),col=contColors,bty="n",cex=0.6)
require(remotes)
remotes::install_github('GwenAntell/divvy@main')
require(divvy)
install.packages("rqgis")
install.packages("RQGIS")
remotes::install_github("jannes-m/RQGIS")
require(divvy);require(RQGIS)
